# 导入数据请求模块
import requests
from jsonpath import jsonpath
import json
# 字体数据字典
# 导入数据解析模块
import parsel
"""发送请求: 模拟浏览器对于url地址发送请求"""

#字典
dict_data1={
    '58544':'0',
    '58703':'1',
    '58599':'2',
    '58628':'3',
    '58526':'4',
    '58614':'5',
    '58710':'6',
    '58684':'7',
    '58490':'8',
    '58484':'9',
    '58381':'a',
    '58652':'b',
    '58503':'c',
    '58422':'d',
    '58650':'e',
    '58427':'f',
    '58501':'g',
    '58554':'h',
    '58488':'i',
    '58437':'j',
    '58671':'k',
    '58522':'l',
    '58405':'m',
    '58587':'n',
    '58379':'o',
    '58367':'p',
    '58504':'q',
    '58491':'r',
    '58375':'s',
    '58712':'t',
    '58475':'u',
    '58691':'v',
    '58391':'w',
    '58511':'x',
    '58345':'y',
    '58666':'z',
    '58408':'A',
    '58561':'B',
    '58497':'C',
    '58430':'D',
    '58442':'E',
    '58579':'F',
    '58428':'G',
    '58571':'H',
    '58600':'I',
    '58384':'J',
    '58409':'K',
    '58598':'L',
    '58711':'M',
    '58653':'N',
    '58364':'O',
    '58453':'P',
    '58480':'Q',
    '58546':'R',
    '58446':'S',
    '58421':'T',
    '58395':'U',
    '58548':'V',
    '58606':'W',
    '58555':'X',
    '58471':'Y',
    '58553':'Z',
    '58355':'的',
    '58662':'一',
    '58454':'是',
    '58647':'了',
    '58382':'我',
    '58641':'不',
    '58396':'人',
    '58687':'在',
    '58701':'他',
    '58560':'有',
    '58483':'这',
    '58619':'个',
    '58698':'上',
    '58451':'们',
    '58664':'来',
    '58447':'到',
    '58411':'时',
    '58432':'大',
    '58496':'地',
    '58562':'为',
    '58685':'子',
    '58412':'中',
    '58505':'你',
    '58492':'说',
    '58533':'生',
    '58410':'国',
    '58565':'年',
    '58696':'着',
    '58435':'就',
    '58707':'那',
    '58495':'和',
    '58400':'要',
    '58374':'她',
    '58568':'出',
    '58366':'也',
    '58399':'得',
    '58536':'里',
    '58676':'后',
    '58564':'自',
    '58591':'以',
    '58655':'会',
    '58594':'家',
    '58626':'可',
    '58424':'下',
    '58705':'而',
    '58681':'过',
    '58700':'天',
    '58445':'去',
    '58520':'能',
    '58668':'对',
    '58417':'小',
    '58459':'多',
    '58532':'然',
    '58625':'于',
    '58476':'心',
    '58581':'学',
    '58414':'么',
    '58689':'之',
    '58624':'都',
    '58622':'好',
    '58670':'看',
    '58440':'起',
    '58462':'发',
    '58523':'当',
    '58407':'没',
    '58693':'成',
    '58468':'只',
    '58397':'如',
    '58457':'事',
    '58456':'把',
    '58582':'还',
    '58623':'用',
    '58617':'第',
    '58508':'样',
    '58448':'道',
    '58699':'想',
    '58469':'作',
    '58549':'种',
    '58620':'开',
    '58660':'美',
    '58509':'总',
    '58642':'从',
    '58455':'无',
    '58378':'情',
    '58669':'己',
    '58433':'面',
    '58372':'最',
    '58635':'女',
    '58588':'但',
    '58347':'现',
    '58470':'前',
    '58651':'些',
    '58575':'所',
    '58627':'同',
    '58632':'日',
    '58525':'手',
    '58431':'又',
    '58713':'行',
    '58584':'意',
    '58550':'动',
    '58573':'方',
    '58563':'期',
    '58444':'它',
    '58515':'头',
    '58473':'经',
    '58667':'长',
    '58657':'儿',
    '58538':'回',
    '58616':'位',
    '58583':'分',
    '58358':'爱',
    '58365':'老',
    '58673':'因',
    '58612':'很',
    '58438':'给',
    '58524':'名',
    '58377':'法',
    '58425':'间',
    '58402':'斯',
    '58357':'知',
    '58682':'世',
    '58640':'什',
    '58659':'两',
    '58629':'次',
    '58506':'使',
    '58603':'身',
    '58577':'者',
    '58661':'被',
    '58559':'高',
    '58394':'已',
    '58547':'亲',
    '58586':'其',
    '58694':'进',
    '58645':'此',
    '58350':'话',
    '58368':'常',
    '58634':'与',
    '58465':'活',
    '58572':'正',
    '58574':'感',
    '58613':'见',
    '58576':'明',
    '58419':'问',
    '58530':'力',
    '58363':'理',
    '58472':'尔',
    '58545':'点',
    '58704':'文',
    '58371':'几',
    '58690':'定',
    '58537':'本',
    '58663':'公',
    '58557':'特',
    '58556':'做',
    '58464':'外',
    '58467':'孩',
    '58674':'相',
    '58458':'西',
    '58485':'果',
    '58413':'走',
    '58376':'将',
    '58352':'月',
    '58346':'十',
    '58441':'实',
    '58418':'向',
    '58529':'声',
    '58426':'车',
    '58482':'全',
    '58633':'信',
    '58527':'重',
    '58649':'三',
    '58644':'机',
    '58618':'工',
    '58353':'物',
    '58683':'气',
    '58387':'每',
    '58638':'并',
    '58708':'别',
    '58539':'真',
    '58678':'打',
    '58386':'太',
    '58463':'新',
    '58589':'比',
    '58656':'才',
    '58349':'便',
    '58654':'夫',
    '58607':'再',
    '58688':'书',
    '58639':'部',
    '58354':'水',
    '58502':'像',
    '58658':'眼',
    '58479':'等',
    '58344':'体',
    '58351':'却',
    '58452':'加',
    '58404':'电',
    '58373':'主',
    '58460':'界',
    '58403':'门',
    '58392':'利',
    '58610':'海',
    '58389':'受',
    '58605':'听',
    '58361':'表',
    '58709':'德',
    '58401':'少',
    '58369':'克',
    '58534':'代',
    '58385':'员',
    '58672':'许',
    '58578':'稜',
    '58494':'先',
    '58416':'口',
    '58592':'由',
    '58593':'死',
    '58486':'安',
    '58436':'写',
    '58512':'性',
    '58566':'马',
    '58380':'光',
    '58611':'白',
    '58643':'或',
    '58580':'住',
    '58715':'难',
    '58388':'望',
    '58390':'教',
    '58552':'命',
    '58521':'花',
    '58679':'结',
    '58518':'乐',
    '58675':'色',
    '58585':'更',
    '58692':'拉',
    '58697':'东',
    '58423':'神',
    '58648':'记',
    '58513':'处',
    '58595':'让',
    '58489':'母',
    '58478':'父',
    '58517':'应',
    '58615':'直',
    '58528':'字',
    '58500':'场',
    '58370':'平',
    '58604':'报',
    '58531':'友',
    '58519':'关',
    '58356':'放',
    '58570':'至',
    '58498':'张',
    '58567':'认',
    '58569':'接',
    '58477':'告',
    '58540':'入',
    '58636':'笑',
    '58535':'内',
    '58551':'英',
    '58393':'军',
    '58714':'候',
    '58481':'民',
    '58621':'岁',
    '58677':'往',
    '58415':'何',
    '58429':'度',
    '58609':'山',
    '58590':'觉',
    '58706':'路',
    '58695':'带',
    '58359':'万',
    '58406':'男',
    '58558':'边',
    '58362':'风',
    '58466':'解',
    '58602':'叫',
    '58493':'任',
    '58601':'金',
    '58348':'快',
    '58608':'原',
    '58450':'吃',
    '58702':'妈',
    '58398':'变',
    '58439':'通',
    '58541':'师',
    '58665':'立',
    '58542':'象',
    '58449':'数',
    '58630':'四',
    '58596':'失',
    '58637':'满',
    '58499':'战',
    '58434':'远',
    '58680':'格',
    '58597':'士',
    '58514':'音',
    '58420':'轻',
    '58510':'目',
    '58686':'条',
    '58383':'呢'
}
# # 模拟浏览器
headers = {
    # User-Agent 用户代理, 表示浏览器/设备的基本身份信息
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36'
    #cookie
    ,'Cookie': 's_v_web_id=verify_ly3qomo2_YbogndOi_P9uK_4NB6_8CYW_FsTfqhp6OoPd; novel_web_id=7386846545851434505; csrf_session_id=a5280effd0cb67b8d52cbb8da99746c9; ttwid=1%7C-n-jiMa0TuCOPkCYZwrd8_Xpn9Nc2YovLKk8V4ONXv4%7C1719897581%7Cc4bb9f02e8a20506a842515eab3d868260501bde99878b9c70410c28209ed26d; msToken=jdrEgWYdUEi4Ejyo-c392f2gdKZ-ZArCBRwifbbustbAeo7CfQdo4TRcZggT_8U4wYeN5FDdCYvrulOMRsKkn24BuvNtgELOP_heHnQ0Mg=='}

#获取排行榜前几个的数据
page_count = '18'
# url地址
#最热榜
# url = 'https://fanqienovel.com/api/author/library/book_list/v0/?page_count='+page_count+'&page_index=0&gender=-1&category_id=-1&creation_status=-1&word_count=-1&book_type=-1&sort=0&a_bogus=EJBQfcZOMsm1uf3kUhke9GUmD%2FR0YW-EgZENKgHrw0wj'
#最新榜
url = 'https://fanqienovel.com/api/author/library/book_list/v0/?page_count='+page_count+'&page_index=0&gender=-1&category_id=-1&creation_status=-1&word_count=-1&book_type=-1&sort=1&a_bogus=dyBDfcZOMsm1Rf3kYXke9b4mD%2Fj0YWRagZENKsNG30on'
#字数榜
# url = 'https://fanqienovel.com/api/author/library/book_list/v0/?page_count='+page_count+'&page_index=0&gender=-1&category_id=-1&creation_status=-1&word_count=-1&book_type=-1&sort=2&a_bogus=my4O6cZOMsm1vE3kYhke9CUmDhR0YWR6gZENKswpR0qH'

# 发起请求
r = requests.get(url, headers=headers)
# print(r.text)
#解决文字加密问题
content = r.text
novel_content = ''
for index in content:
    try:
        word = dict_data1[str(ord(index))]
    except:
        word = index
    novel_content += word
j1 = json.loads(novel_content)
print(j1)
print(jsonpath(j1, '$..book_list[*].book_name'))
